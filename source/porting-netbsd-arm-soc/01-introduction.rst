############################################
介绍
############################################

本文讲述移植 NetBSD 到一个新的 ARM SoC 的经验。这里使用的芯片是一个基于 ARM9 的 Agere Vx115 移动电话数字基带芯片，然后一个 Vx115 VEP 评估板使用了该芯片。这里所涉及到的信息应该可以帮助到移植 NetBSD 到任何一个新的基于 ARM 的平台。

移植差异
======================================

在移植 NetBSD 时，根据内核中已经可用的支持层级，会存在很大的差异。

* 处理器架构移植

  这涉及到适配 NetBSD 内核运动到一个新的处理器架构类型（如 MIPS，PowerPC，ARM 等，这些类型都已经被支持）。这会是一个大任务，需要同时对 NetBSD 内核以及处理器架构都有很深入的理解。

* SoC 移植

  这涉及到移植 NetBSD 到一个新的 SoC，而它所使用的处理器核心类型已经被 NetBSD 支持，但是提供一些特别的芯片外围设备。这涉及到定义需要与SoC上的设备交互的总线结构，以及外围设备驱动。

* 平台移植

  这涉及到开发代码让 NetBSD 运行到一个特别的平台（评估板），而它使用的芯片(SoC) 已经被 NetBSD 内核所支持。这涉及到创建合适的平台启动代码，以及板载的芯片外围设备支持，还有一个合适的 root 文件系统，包含平台应用和库。
  
本文主要讲述后两种开发工作。Vx115 SoC 基于一个已经被 NetBSD 支持的 ARM9 处理器核心（当然实际的差异是，ARM926EJ-S ,在当前使用的内核版本并不直接支持，需要一些小的适配），因此不需要进行处理器移植，但是 SoC 提供了一些特别的片上设备，并且这个评估板也有一些其他的硬件部分。

适用范围
======================================

本次移植的重点在于让 NetBSD 能够运行在这个平台，提供最小的支持，通过串口运行一个控制台和shell。并且只涉及到那些支持此操作的片上或者片外设备；这个 SoC 提供了许多其他的外设，可能需要（驱动）支持以便包含一个接近全功能的板级支持包。

这样一个 *基础* 的移植，需要解决一些相对少量的问题，在下面几个部分分别讲述。

*
*
*
*
*
*
*
*
*
*

上述的每个部分都涉及到创建各种配置，源文件和头文件，这些文件的内容分别在各个章节进行讨论。

致谢和参考
======================================

作为一个开源系统的标准实践，所有需要的功能都可以在已经存在的移植对应的文件中找到。本项目使用了全部的这些可用代码（在此特别感谢所有的原作者）。事实上，正是由于他们的工作，以及他们开放共享的精神，NetBSD 以及其他的开源系统才能不断的向前兼容新的平台。

在 NetBSD 项目网站有许多的有关构建和参与 NetBSD 系统工作的信息。


| Jon Sevy
| jsevy@cs.drexel.edu
| http://gicl.cs.drexel.edu/people/sevy